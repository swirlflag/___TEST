<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Document</title>
<link rel="stylesheet" href="https://unpkg.com/swiper/css/swiper.min.css">
<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;700&display=swap" rel="stylesheet">
<script src="https://unpkg.com/swiper/js/swiper.min.js"></script>
</head>
<body>

<div id="app">

    <div class="swiper-container">
        <div class="swiper-wrapper">
            <div class="swiper-slide" id="test">
                <div class="content-section">
                    <div class="content-title">1. Page Section</div>
                    <div class="content-text">
                        Integer vitae commodo elit.
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="content-section">
                    <div class="content-title">2. Scroll Section</div>
                    <div class="content-text">
                        Quisque dictum gravida ex, ut volutpat magna congue sed. Suspendisse rhoncus cursus aliquet. In quis est ac ex scelerisque gravida ac at felis. Cras ultrices euismod ante et sagittis. Pellentesque cursus sem augue, eu tristique nulla congue dictum. Cras eget scelerisque lorem. Pellentesque rhoncus sit amet tellus ut vehicula. Curabitur pulvinar mattis tortor, a sodales augue consectetur sed. Integer egestas laoreet dui, pharetra accumsan orci rutrum at. Donec id enim nec leo semper congue eget et elit. Fusce dolor ipsum, ullamcorper sit amet felis quis, iaculis fringilla quam. Nulla laoreet sodales viverra. Duis est metus, luctus sed consectetur in, ornare pellentesque nunc. In euismod molestie nulla id ullamcorper.
                        <br><br>
                        Pellentesque rutrum tincidunt lectus, in bibendum est. Etiam nec massa facilisis, scelerisque metus in, eleifend dolor. Donec semper ante magna, a gravida nisi tincidunt in. Integer quis nisi sem. Praesent eu lorem gravida, aliquet enim nec, condimentum metus. Donec vel ex in lacus vestibulum feugiat at sed orci. Phasellus vitae mauris condimentum, cursus nisi id, ullamcorper dui.
                        <br><br>
                        Fusce finibus ex vel diam viverra, eu scelerisque nulla volutpat. Aliquam imperdiet, ipsum ac tristique cursus, metus risus lobortis augue, vel cursus quam turpis id orci. Pellentesque luctus sollicitudin quam, in fringilla libero pharetra vel. Suspendisse eu massa velit. Praesent pretium eget sapien condimentum vestibulum. Mauris ligula orci, vestibulum nec neque sed, tempus lacinia diam. Integer ut diam pellentesque, lacinia odio ac, aliquet nunc. Integer aliquam felis eget ante malesuada, eget volutpat tellus congue. Phasellus vel neque sollicitudin, cursus leo ac, convallis nibh. Suspendisse non erat felis. Quisque at bibendum enim. Aliquam urna erat, placerat vel malesuada sed, vehicula vitae odio. Donec vehicula, neque sed venenatis molestie, risus eros hendrerit ipsum, eu accumsan tellus tortor id lacus.
                        <br><br>
                        Nulla a facilisis purus, sed finibus augue. Integer congue tristique nisi. Aliquam pellentesque dignissim tortor, sed euismod nisi luctus eget. Proin viverra quam odio, et lacinia sem vehicula vitae. Praesent bibendum faucibus lorem, ut ullamcorper justo tempor vitae. Aliquam vulputate nunc nec aliquet suscipit. Vestibulum quis rutrum dolor, eu sollicitudin elit.
                        <br><br>
                        In et orci vestibulum odio auctor aliquam. Morbi sed congue nibh, quis aliquam arcu. Vivamus semper consequat massa, hendrerit porta est porta et. Duis mollis orci dui, a pretium ante efficitur non. Sed suscipit, urna sit amet efficitur elementum, velit nibh tempor sapien, in volutpat dui metus eget quam. Suspendisse potenti. Nulla sollicitudin erat id vestibulum aliquam. Vivamus in feugiat nibh.
                        <br><br>
                        Aliquam ut felis finibus mauris euismod interdum. Proin tellus arcu, ornare in auctor quis, euismod eu diam. Vivamus elementum tincidunt enim sed elementum. Aliquam congue dui vel molestie fermentum. Nulla vitae neque efficitur, vehicula massa ut, tempus sapien. Vestibulum nisl tortor, tincidunt vitae sollicitudin a, mattis id lorem. Integer vitae accumsan purus.
                        <br><br>
                        Aenean condimentum sit amet neque porta volutpat. Aenean pharetra, eros commodo ultrices tincidunt, massa mi dapibus enim, in tincidunt ante tortor sit amet lorem. Nam iaculis nec sem ac tincidunt. Nullam bibendum odio consequat diam feugiat, quis tincidunt libero mattis. Ut orci nisi, maximus quis ipsum vitae, laoreet ultrices augue. Sed vehicula sapien quis sem egestas hendrerit. Curabitur fringilla congue mi, luctus sagittis odio luctus in. Vivamus sagittis in orci at lobortis.
                        <br><br>
                        Pellentesque sit amet orci consequat, interdum tortor vitae, viverra metus. Aenean suscipit lacus eu porta lacinia. Cras dictum aliquam molestie. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Praesent pretium dui vulputate, viverra ipsum at, condimentum purus. Proin rutrum mauris quam, eu rutrum leo dictum et. Phasellus et vehicula diam, ut hendrerit dui. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus eget augue lorem. Pellentesque faucibus ex quis lectus scelerisque condimentum. Aliquam sagittis, mauris nec venenatis consequat, nisl mi vehicula erat, a pellentesque nisi nulla eget turpis.
                        <br><br>
                        Fusce lectus est, tristique vitae malesuada et, sagittis non nunc. Vestibulum tincidunt sapien ligula, quis mattis dui gravida nec. Vivamus eleifend est eu purus molestie vestibulum. Etiam sit amet ligula rhoncus ante tristique aliquam facilisis id tortor. Curabitur blandit turpis nec eros fringilla, in semper lectus dictum. In semper et justo a mattis. Maecenas posuere lorem quis mi commodo, vel egestas magna iaculis.
                        <br><br>
                        Nulla ultrices consequat interdum. In sagittis leo id rhoncus volutpat. Morbi placerat ipsum a rutrum imperdiet. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam ac placerat augue. Nulla eget nunc vitae massa faucibus cursus. Aliquam ultricies egestas mi, vitae sollicitudin dolor ultrices nec. Ut commodo ante non eros sagittis, ac faucibus arcu tincidunt. Ut luctus pulvinar nibh, vitae consectetur enim feugiat sed. Morbi finibus malesuada tristique. Morbi vitae quam felis. Etiam vitae ultrices urna, eu vehicula neque. Duis aliquet eget dolor a sagittis. Integer volutpat pharetra condimentum. Praesent auctor lectus ac metus congue, at pulvinar nulla maximus.
                    </div>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="content-section">
                    <div class="content-title">3. Scroll Section</div>
                    <div class="content-text">
                        Quisque dictum gravida ex, ut volutpat magna congue sed. Suspendisse rhoncus cursus aliquet. In quis est ac ex scelerisque gravida ac at felis. Cras ultrices euismod ante et sagittis. Pellentesque cursus sem augue, eu tristique nulla congue dictum. Cras eget scelerisque lorem. Pellentesque rhoncus sit amet tellus ut vehicula. Curabitur pulvinar mattis tortor, a sodales augue consectetur sed. Integer egestas laoreet dui, pharetra accumsan orci rutrum at. Donec id enim nec leo semper congue eget et elit. Fusce dolor ipsum, ullamcorper sit amet felis quis, iaculis fringilla quam. Nulla laoreet sodales viverra. Duis est metus, luctus sed consectetur in, ornare pellentesque nunc. In euismod molestie nulla id ullamcorper.
                        <br><br>
                        Pellentesque rutrum tincidunt lectus, in bibendum est. Etiam nec massa facilisis, scelerisque metus in, eleifend dolor. Donec semper ante magna, a gravida nisi tincidunt in. Integer quis nisi sem. Praesent eu lorem gravida, aliquet enim nec, condimentum metus. Donec vel ex in lacus vestibulum feugiat at sed orci. Phasellus vitae mauris condimentum, cursus nisi id, ullamcorper dui.
                        <br><br>
                        Fusce finibus ex vel diam viverra, eu scelerisque nulla volutpat. Aliquam imperdiet, ipsum ac tristique cursus, metus risus lobortis augue, vel cursus quam turpis id orci. Pellentesque luctus sollicitudin quam, in fringilla libero pharetra vel. Suspendisse eu massa velit. Praesent pretium eget sapien condimentum vestibulum. Mauris ligula orci, vestibulum nec neque sed, tempus lacinia diam. Integer ut diam pellentesque, lacinia odio ac, aliquet nunc. Integer aliquam felis eget ante malesuada, eget volutpat tellus congue. Phasellus vel neque sollicitudin, cursus leo ac, convallis nibh. Suspendisse non erat felis. Quisque at bibendum enim. Aliquam urna erat, placerat vel malesuada sed, vehicula vitae odio. Donec vehicula, neque sed venenatis molestie, risus eros hendrerit ipsum, eu accumsan tellus tortor id lacus.
                        <br><br>
                        Nulla a facilisis purus, sed finibus augue. Integer congue tristique nisi. Aliquam pellentesque dignissim tortor, sed euismod nisi luctus eget. Proin viverra quam odio, et lacinia sem vehicula vitae. Praesent bibendum faucibus lorem, ut ullamcorper justo tempor vitae. Aliquam vulputate nunc nec aliquet suscipit. Vestibulum quis rutrum dolor, eu sollicitudin elit.
                        <br><br>
                        In et orci vestibulum odio auctor aliquam. Morbi sed congue nibh, quis aliquam arcu. Vivamus semper consequat massa, hendrerit porta est porta et. Duis mollis orci dui, a pretium ante efficitur non. Sed suscipit, urna sit amet efficitur elementum, velit nibh tempor sapien, in volutpat dui metus eget quam. Suspendisse potenti. Nulla sollicitudin erat id vestibulum aliquam. Vivamus in feugiat nibh.
                        <br><br>
                        Aliquam ut felis finibus mauris euismod interdum. Proin tellus arcu, ornare in auctor quis, euismod eu diam. Vivamus elementum tincidunt enim sed elementum. Aliquam congue dui vel molestie fermentum. Nulla vitae neque efficitur, vehicula massa ut, tempus sapien. Vestibulum nisl tortor, tincidunt vitae sollicitudin a, mattis id lorem. Integer vitae accumsan purus.
                        <br><br>
                        Aenean condimentum sit amet neque porta volutpat. Aenean pharetra, eros commodo ultrices tincidunt, massa mi dapibus enim, in tincidunt ante tortor sit amet lorem. Nam iaculis nec sem ac tincidunt. Nullam bibendum odio consequat diam feugiat, quis tincidunt libero mattis. Ut orci nisi, maximus quis ipsum vitae, laoreet ultrices augue. Sed vehicula sapien quis sem egestas hendrerit. Curabitur fringilla congue mi, luctus sagittis odio luctus in. Vivamus sagittis in orci at lobortis.
                        <br><br>
                        Pellentesque sit amet orci consequat, interdum tortor vitae, viverra metus. Aenean suscipit lacus eu porta lacinia. Cras dictum aliquam molestie. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Praesent pretium dui vulputate, viverra ipsum at, condimentum purus. Proin rutrum mauris quam, eu rutrum leo dictum et. Phasellus et vehicula diam, ut hendrerit dui. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus eget augue lorem. Pellentesque faucibus ex quis lectus scelerisque condimentum. Aliquam sagittis, mauris nec venenatis consequat, nisl mi vehicula erat, a pellentesque nisi nulla eget turpis.
                        <br><br>
                        Fusce lectus est, tristique vitae malesuada et, sagittis non nunc. Vestibulum tincidunt sapien ligula, quis mattis dui gravida nec. Vivamus eleifend est eu purus molestie vestibulum. Etiam sit amet ligula rhoncus ante tristique aliquam facilisis id tortor. Curabitur blandit turpis nec eros fringilla, in semper lectus dictum. In semper et justo a mattis. Maecenas posuere lorem quis mi commodo, vel egestas magna iaculis.
                        <br><br>
                        Nulla ultrices consequat interdum. In sagittis leo id rhoncus volutpat. Morbi placerat ipsum a rutrum imperdiet. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam ac placerat augue. Nulla eget nunc vitae massa faucibus cursus. Aliquam ultricies egestas mi, vitae sollicitudin dolor ultrices nec. Ut commodo ante non eros sagittis, ac faucibus arcu tincidunt. Ut luctus pulvinar nibh, vitae consectetur enim feugiat sed. Morbi finibus malesuada tristique. Morbi vitae quam felis. Etiam vitae ultrices urna, eu vehicula neque. Duis aliquet eget dolor a sagittis. Integer volutpat pharetra condimentum. Praesent auctor lectus ac metus congue, at pulvinar nulla maximus.
                    </div>
                </div>
            </div>

            <div class="swiper-slide">
                <div class="content-section">
                    <div class="content-title">4. Page Section</div>
                    <div class="content-text">
                        Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Etiam ac placerat augue. Nulla eget nunc vitae massa faucibus cursus.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
 var swiper = new Swiper('.swiper-container', {
        direction: 'vertical',
    //   slidesPerView: 'auto',
    //   freeMode: true,
    //   scrollbar: {
    //     el: '.swiper-scrollbar',
    //   },
        effect : 'fade',
        speed :600,
        mousewheel: true,
        autoHeight: true,
        preventInteractionOnTransition : true
    });

    const targetSection = null;

    // const scrollSetting = () => {
    //     const slides = document.querySelectorAll('.swiper-slide');

    //     for(let i = 0, l = slides.length ; i < l ; ++i){
    //         const slide = slides[i];

    //         // console.log(slide);
    //         slide.addEventListener('scroll', () => {
    //             const max   = slide.scrollHeight - window.innerHeight;
    //             const nowSt = slide.scrollTop;
    //             // console.log(max, nowSt);

    //             if(nowSt <= 0){
    //                 swiper.slidePrev();
    //             }else {
    //                 swiper.slideNext();
    //             }
    //         });
    //     }
    // }

    // const findTarget = list => list.find(el => el.classList && el.classList.contains('swiper-slide'));
    // window.addEventListener('wheel' , (e) => {
    //     const winH      = window.innerHeight;
    //     const path      = e.path || e.composedPath();
    //     const slide     = findTarget(path);
    //     if(slide.scrollHeight > window.innerHeight){
    //         return
    //     }
    //     const delta     = e.deltaY;
    //     const direction = e.deltaY > 0;

    //     if(direction){
    //         swiper.slideNext();
    //     }else {
    //         swiper.slidePrev();
    //     }

    //     // console.log(slide.scrollTop)

    //     // if(){

    //     // }

    // });

    // scrollSetting();


    swiper.on('slideChange' , () => {

        const {
            slides,
            realIndex,
            previousIndex,
            $el
        } = swiper;

        const container = $el[0];

        const slide = slides[realIndex];

        slide.focus();

        if(!(slide.scrollHeight > window.innerHeight)){
            swiper.mousewheel.enable();
            return
        }

        swiper.mousewheel.disable();

        if(previousIndex < realIndex){
            slide.scrollTop = 1;
        }else {
            slide.scrollTop = slide.scrollHeight;
            slide.scrollTop = slide.scrollTop - 1;
        }

        const escapeSlide = () => {
            // console.log('enable')
            swiper.mousewheel.enable();
            slide.removeEventListener('scroll' , detected);
        }

        const detected = (e) => {
            const nowSt = slide.scrollTop;
            const winH  = window.innerHeight;

            // console.log(nowSt + winH , slide.scrollHeight)

            if(nowSt <= 0){
                // console.log('go prev')
                swiper.slidePrev();
                // swiper.mousewheel.enable();
                slide.removeEventListener('scroll' , detected);
            }else if(nowSt + winH >= slide.scrollHeight){
                // console.log('go next');
                swiper.slideNext();
                // swiper.mousewheel.enable();
                slide.removeEventListener('scroll' , detected);
            }
        }

        slide.addEventListener('scroll' , detected);

    });

    // swiper.on('slideChangeTransitionEnd' , () => {
    //     const {
    //         slides,
    //         realIndex
    //     } = swiper;

    //     const slide = slides[realIndex];
    // })

</script>
</body>
</html>