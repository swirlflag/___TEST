<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Document</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/plugins/animation.gsap.js"></script>

<style>
*{
    margin: 0;padding: 0;
}
html, body {
    width: 100%; height: 100%;
}
#app {
    height: 100%;
}
.trigger-box {
    position: relative;
    display: inline-block;
    background-color: #ddd;
}
.trigger-line {
    height: 1px;
    background: linear-gradient(90deg, rgba(221,51,221,1) 0%, rgba(253,226,29,1) 50%, rgba(51,221,51,1) 100%);
    width: 100%;
}

.title {
    width: 100%; height: 100%;
    border: 1px solid #000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.title .trigger-line {
    position: absolute;
}
.title h1{
    font-size: 10px;
    letter-spacing: normal;
    opacity: 0;
    /* position: fixed; */
}

.title h1 span{
    display: inline-block;
}


.section-content {
    max-width : 1000px;
    padding: 50px;
}

.section-content {
    max-width : 1000px;
    padding: 50px;
}

.text_contents {
    padding: 300px 100px;
    position: relative;
}
.text_contents h2 {
    overflow: hidden;
}
.text_contents h2 div {
    white-space: nowrap;
    display: inline-block;
}

.text_contents .trigger-line{
    position: absolute;
    top: 0; left: 0;
}

.rect_contents {
    position: relative;    
    height: 100%;
}

.rect_contents .rect1{
    width: 200px; height: 200px;
    background-color: rgb(248, 165, 69);
    position: absolute;
    left: 70%; top: 500px;
    display: inline-block;
}
.rect_contents .rect2{
    width: 300px; height: 300px;
    background-color: rgb(27, 152, 209);
    position: absolute;
    left: 20%; top: 600px;
    display: inline-block;
}
.rect_contents .rect3{
    width: 250px; height: 250px;
    background-color: rgb(65, 238, 109);
    position: absolute;
    left: 40%; top: 300px;
    display: inline-block;
}


</style>
</head>
<body>

<div id="app">

    <section class="title">
        <div class="trigger-line" trigger-pointer="1"></div>
        <h1 trigger-target="1">
            <span trigger-target="1">안</span>
            <span trigger-target="1">녕</span>
            <span trigger-target="1">하</span>
            <span trigger-target="1">세</span>
            <span trigger-target="1">요</span>
            <span trigger-target="1">!</span>
        </h1>
    </section>

    <section class="text_contents">
        <div class="trigger-line" trigger-pointer="2"></div>
        <div class="section-content">
            <h2>
                <div trigger-target="2">
                    In hac habitasse platea dictumst. Mauris sollicitudin mauris nec ex efficitur tincidunt. Integer ultricies velit dui, vel posuere lacus congue quis. Integer ex diam, sodales a bibendum non, viverra sit amet neque. Proin ac lacinia eros. Suspendisse tincidunt convallis felis vitae pulvinar. Nulla interdum ex odio, vel auctor ipsum cursus in. Suspendisse elementum rhoncus ante, a egestas risus pellentesque a.
                </div>
            </h2>
            <p trigger-target="2">
                In hac habitasse platea dictumst. Mauris sollicitudin mauris nec ex efficitur tincidunt. Integer ultricies velit dui, vel posuere lacus congue quis. Integer ex diam, sodales a bibendum non, viverra sit amet neque. Proin ac lacinia eros. Suspendisse tincidunt convallis felis vitae pulvinar. Nulla interdum ex odio, vel auctor ipsum cursus in. Suspendisse elementum rhoncus ante, a egestas risus pellentesque a.

                Duis vel purus consequat, viverra ipsum volutpat, sollicitudin augue. Mauris eros dolor, mollis non felis sed, dictum luctus ante. Cras consectetur, magna eu convallis varius, arcu turpis vehicula diam, sed suscipit tellus tellus ut dolor. Mauris vel efficitur dolor, nec suscipit enim. Nam sed felis nisl. Proin posuere quis justo et iaculis. Sed at enim ut ipsum cursus posuere. Phasellus posuere pharetra leo nec dapibus.

                In a rutrum leo. Nulla sollicitudin rhoncus eros, eu facilisis nulla iaculis ac. Quisque sed ante cursus, ultricies neque non, dictum dolor. Vestibulum varius aliquet varius. Duis bibendum risus metus, sit amet laoreet neque mattis sed. Praesent auctor laoreet felis, eu laoreet tellus volutpat nec. Nunc ut arcu et metus accumsan imperdiet. Donec feugiat massa a luctus ornare. Proin vitae nulla vitae orci fringilla tempor nec ut neque.

                Pellentesque eu nisi semper, dignissim sem sit amet, dapibus turpis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Pellentesque vestibulum leo sed tortor tincidunt egestas. Nam sollicitudin mi quis quam feugiat, eget vestibulum orci placerat. Sed pulvinar vestibulum nisl, non cursus lorem varius vestibulum. Suspendisse commodo nisi et magna volutpat convallis. Donec sed rhoncus magna, et placerat leo. Donec lobortis arcu urna, vel feugiat lacus cursus in. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Cras in mollis mauris. Pellentesque ullamcorper lectus eu felis elementum bibendum. Phasellus vel felis eu arcu tincidunt auctor.
            </p>
        </div>
    </section>

    <section class="rect_contents">
        <div class="trigger-line" trigger-pointer="3"></div>
        <div class="rect1" trigger-target="3"></div>
        <div class="rect2" trigger-target="3"></div>
        <div class="rect3" trigger-target="3"></div>
    </section>
</div>

<script src="dx_scrolltrigger.js"></script>
<script>

const iterElement = (els,fn) => {for(let i = 0, l = els.length; i < l; ++i){fn(els[i],i)}}

const initPage = () => {

    const myScrollAction = makeScrollAction({isTest: true});

    myScrollAction('.title h1' , 100, { opacity : 1});
    myScrollAction('.title h1' , 600, { fontSize:'200px', color: '#f00'});

    const el_section1h1          = document.querySelector('.title h1');
    const el_section1h1Text     = document.querySelectorAll('.title h1 span');

    iterElement(el_section1h1Text, (text,i) => {
        myScrollAction(text, 600, {yPercent : 50 * (i%2?1:-1)});
    });

    const el_section2Title   = document.querySelector('.text_contents .section-content h2 div');
    const el_section2Text    = document.querySelector('.text_contents .section-content p');

    myScrollAction(el_section2Text, 400 , {marginTop : '80px' });
    myScrollAction(el_section2Title, 400 , {xPercent : -50});

    const el_section3Rect1 = document.querySelector('.rect_contents .rect1');
    const el_section3Rect2 = document.querySelector('.rect_contents .rect2');
    const el_section3Rect3 = document.querySelector('.rect_contents .rect3');

    myScrollAction(el_section3Rect1 , 400, { rotation : 180});
    myScrollAction(el_section3Rect2 , 400, { rotation : -40});
    myScrollAction(el_section3Rect3 , 400, { rotation : -100});

};


window.addEventListener('DOMContentLoaded', initPage);


</script>
</body>
</html>